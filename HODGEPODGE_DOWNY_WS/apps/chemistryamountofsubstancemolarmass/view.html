<div class="ctrl">
	<select name="type"></select><input type="text" />
</div>
<table></table>
{literal}
<style type="text/css">
	.app select{box-sizing:border-box;margin-bottom:10px;}
	.app select option.title{background:#999999;color:#FFFFFF;}
	.app .ctrl *{margin-right:10px;box-sizing:border-box;}
	.app table{margin:0px 20px 50px 0px;width:100%;border-bottom:1px solid #4BACC6;}
	.app table thead{border-top:1px solid #4BACC6;border-bottom:1px solid #4BACC6;}
	.app table thead th{font-weight:400;}
	.app table tr.odd{background:#D2EAF1;}
	.app table tr.even{background:#FFFFFF;}
	.app table th{text-align:left;padding:5px 10px;width:260px;}
	.app table th.unit{text-align:right;font-weight:400;}
	.app table td{padding:5px 10px;max-width:85%;}
</style>
{/literal}
<script type="text/javascript">
var DATA = {json_encode($data)};
{literal}
var DB = {
	'物质的量': [
		['mmol', '毫摩尔 (mmol)', 1000],
		['mol', '莫耳 (mol)', 1],
		['kmol', '千摩尔 (kmol)', 0.001],
		['lb-mol', '磅摩尔 (lb-mol)', 0.0022046226218487758072297380134503]
	],
	'莫耳质量': [
		['g/mol', '克每摩尔 (g/mol)', 1],
		['kg/mol', '公斤每摩尔 (kg/mol)', 0.001],
		['H', '氢 (H)', 0.99212254697700259936107307974681],
		['O', '氧 (O)', 0.062502343837893921022038326437241],
		['S', '硫 (S)', 0.03118665211289568064868236394823],
		['Cl', '氯 (Cl)', 0.028206357713028516627647871830311],
		['Fe', '铁 (Fe)', 0.017906706061420001790670606142],
		['H2', '氢分子 (H2)', 0.49606127348850129968053653987341],
		['H2O', '水分子 (H2O)', 0.055508435061791989910786843168688],
		['NaCl', '食盐（氯化钠）(NaCl)', 0.017110756596919426471092781180406],
		['Cl2', '氯分子 (Cl2)', 0.014103178856514258313823935915155],
		['S8', '硫分子 (S8)', 0.0038983315141119600810852954935288],
		['C12H22O11', '餐糖（蔗糖）(C12H22O11)', 0.0029214440066693060939452254957457]
	]
};

var html = '';
html += '<option value="">请选择</option>';
for(key in DB){
	html += '<option disabled="disabled"></option>';
	html += '<option disabled="disabled" class="title">' + key + '</option>';
	for(k in DB[key]){
		html += '<option data-rate="' + DB[key][k][2] + '" data-cate="' + key + '" value="' + DB[key][k][0] + '">' + DB[key][k][1] + '</option>';
	}
}
$('.app select').html(html);

$('.app input').on('change keyup', refresh);
$('.app select').change(refresh);

function refresh(){
	$('.app table').html('');

	var cate =	$('.app select option:selected').data('cate');
	var rate =	$('.app select option:selected').data('rate');
	var inval = $('.app input').val();

	if(cate != '' && rate != '' && inval != ''){
		html = '';
		for(key in DB[cate]){
			html += '<tr class="' + (key % 2 ? 'even' : 'odd') + '"><th>' + DB[cate][key][1] + '</th><td>' + (DB[cate][key][2] * inval / rate) + '</td></tr>';
		}
		html = '<thead><tr><th colspan="2">' + cate + '</th></tr></thead><tbody>' + html + '</tbody>';
		$('.app table').html(html);
	}
}

$('.app input[type=text]').val(DATA.content);
$('.app select').val(DATA.type).change();
{/literal}
</script>

<?php
$datas = [
	'length' => ['长度', true, [
		'公制' => [
			'km' => ['千米 (km)', '0.001|0'],
			'm' => ['米 (m)', '1|0'],
			'dm' => ['分米 (dm)', '10|0'],
			'cm' => ['厘米 (cm)', '100|0'],
			'mm' => ['毫米 (mm)', '1000|0'],
			'µm' => ['微米 (µm)', '1000000|0'],
			'nm' => ['纳米 (nm)', '1000000000|0'],
			'Å' => ['埃米 (Å)', '10000000000|0']
		],
		'英/美' => [
			'league' => ['里格', '0.00020712373074577798987247806145444'],
			'mi' => ['英里 (mi)', '0.00062137119223733396961743418436332'],
			'furlong' => ['弗隆', '0.0049709695378986717569394734749065'],
			'chain' => ['链', '0.049709695378986717569394734749065'],
			'rd' => ['杆 (rd)', '0.19883878151594687027757893899626'],
			'yd' => ['码 (yd)', '1.0936132983377077865266841644794'],
			'ft' => ['英尺 (ft)', '3.2808398950131233595800524934383'],
			'link' => ['链接', '4.9709695378986717569394734749065'],
			'hand' => ['手', '9.842519685039370078740157480315'],
			'in' => ['英寸 (in)', '39.37007874015748031496062992126'],
			'line' => ['线', '393.7007874015748031496062992126'],
			'mil' => ['密耳 (mil)', '39370.07874015748031496062992126'],
			'thou' => ['Thou (thou)', '39370.07874015748031496062992126']
		],
		'航海' => [
			'sea mile' => ['海里', '0.00053995680345572354211663066954644'],
			'fathom' => ['噚', '0.54680664916885389326334208223967']
		],
		'天文' => [
			'pc' => ['秒差距 (pc)', '0.00000000000000003240779'],
			'light year' => ['光年', '0.00000000000000010570008340246154637094605244851'],
			'AE' => ['天文单位 (AE)', '0.000000000006684589'],
			'light minute' => ['光分', '0.00000000005559404'],
			'light second' => ['光秒', '0.000000003335642']
		]
	]],
	'volume' => ['体积和容量', true, [
		'公制' => [
			'km3' => ['立方千米', '0.000000000001'],
			'm3' => ['立方米', '0.001'],
			'hl' => ['公石', '0.01'],
			'decaliter' => ['十升', '0.1'],
			'dm3' => ['立方分米', '1.0'],
			'l' => ['升 (l)', '1'],
			'dl' => ['分升', '10'],
			'cl' => ['厘升', '100'],
			'cm3' => ['立方厘米', '1000'],
			'ml' => ['毫升', '1000'],
			'mm3' => ['立方毫米', '1000000'],
			'µl' => ['微升', '1000000']
		],
		'英制液体/干货' => [
			'barrel:2' => ['桶', '0.006110602'],
			'bu:1' => ['蒲式耳 (bu:1)', '0.02749610'],
			'pk' => ['配克 (pk)', '0.1099844'],
			'gal:2' => ['加仑 (gal:2)', '0.2199688'],
			'qt:1' => ['夸脱 (qt:1)', '0.8798751'],
			'pt:2' => ['品脱  (pt:2)', '1.759751'],
			'oz:1' => ['液量盎司 (oz:1)', '35.19501']
		],
		'美制液体' => [
			'acre_foot' => ['英亩英尺', '0.0000008107131'],
			'yd3' => ['立方码 (yd³)', '0.001307951'],
			'barrel' => ['桶', '0.006289813'],
			'ft3' => ['立方英尺 (ft³)', '0.03531468'],
			'gal:1' => ['加仑 (gal:1)', '0.2641722'],
			'qt:2' => ['夸脱 (qt:2)', '1.056688'],
			'pt' => ['品脱  (pt)', '2.113376'],
			'gill' => ['基尔', '8.453507'],
			'oz' => ['液量盎司 (oz)', '33.81402'],
			'in3' => ['立方英寸 (in³)', '61.02376'],
			'fluid_dram' => ['打兰', '270.5122'],
			'minim' => ['微量', '16230.73']
		],
		'美制干货' => [
			'barrel:1' => ['桶', '0.008648492'],
			'bu' => ['蒲式耳 (bu)', '0.02837759'],
			'pk:1' => ['配克 (pk:1)', '0.1135104'],
			'gal' => ['加仑 (gal)', '0.2270208'],
			'qt' => ['夸脱 (qt)', '0.9080832'],
			'pt:1' => ['品脱  (pt:1)', '1.816166'],
			'gill:1' => ['基尔', '7.264665'],
			'FBM' => ['板尺 (FBM)', '0.42377611111111111111111111111111']
		],
		'日本' => [
			'koku:1' => ['石', '0.005543548'],
			'to' => ['转换成', '0.05543548'],
			'sho' => ['翔', '0.5543548'],
			'go' => ['盒', '5.543548']
		],
		'烹饪（美制）' => [
			'cup' => ['杯', '4.226754'],
			'tablespoon:1' => ['大汤匙', '67.62803'],
			'teaspoon:1' => ['茶匙', '202.8841']
		],
		'烹饪（公制）' => [
			'tablespoon' => ['大汤匙', '66.66667'],
			'teaspoon' => ['茶匙', '200'],
			'spice_measure' => ['调味匙', '1000']
		]
	]],
	'area' => ['面积', true, [
		'公制' => [
			'km2' => ['平方公里', '0.000001'],
			'ha' => ['公顷 (ha)', '0.0001'],
			'a' => ['为 (a)', '0.01'],
			'm2' => ['平方米', '1'],
			'dm2' => ['平方分米', '100'],
			'cm2' => ['平方厘米 (cm²)', '10000'],
			'mm2' => ['平方毫米', '1000000'],
			'µm2' => ['平方微米', '1000000000000'],
			'nm2' => ['平方纳米', '1000000000000000000']
		],
		'英/美' => [
			'township' => ['小镇', '0.00000001072506'],
			'square_mile' => ['平方英里', '0.0000003861022'],
			'homestead' => ['宅基', '0.000001544409'],
			'acre' => ['英亩', '0.0002471055'],
			'rood' => ['路得', '0.0009884220'],
			'square_rod' => ['平方杆', '0.03953687'],
			'square' => ['平方', '0.1076391'],
			'yr2' => ['平方码 (yr²)', '1.195990'],
			'ft2' => ['平方英尺 (ft²)', '10.76391'],
			'in2' => ['平方英寸 (in²)', '1550.003']
		],
		'日本' => [
			'tsubo' => ['坪', '0.3024999'],
			'cho' => ['町', '100.8333'],
			'tann' => ['段, 反', '1008.333'],
			'se' => ['亩', '10083.33']
		],
		'其他' => [
			'metric_dunam' => ['公制德南', '0.001'],
			'cypriot_dunam' => ['塞德南', '0.00074749375'],
			'iraqi_dunam' => ['伊拉克德南', '0.0004'],
			'greek_stremma' => ['希腊面积单位', '0.001'],
			'football_pitch' => ['Football pitch', '0.000140056']
		]
	]]
];
$this->assign('datas', $datas);

$convert = "
	if(cate == 'length'){
		if(to == from){
			return val;
		}else if(to.indexOf('|') != -1 && from.indexOf('|') != -1){
			to = to.split('|');
			from = from.split('|');
			return to[0] / from[0] * val;
		}else if(to.indexOf('|') != -1){
			to = to.split('|');
			return val / from * to[0];
		}else if(from.indexOf('|') != -1){
			from = from.split('|');
			return val / from[0] * to;
		}
	}
	return val * to / from;
";
$this->assign('convert', $convert);

$cates = [];
foreach($datas as $k => $v)
{
	$cates[] = $k;
}
$types = [];
foreach($datas as $k => $v)
{
	if($v[1])
	{
		foreach($v[2] as $_v)
		{
			foreach($_v as $__k => $__v)
			{
				$types[] = $__k;
			}
		}
	}
	else
	{
		foreach($v[2] as $_k => $_v)
		{
			$types[] = $_k;
		}
	}
}
$params = $this->_submit->obtain($_REQUEST, [
	'content' => [['format', 'trim']],
	'cate' => [['valid', 'in', '', '', $cates]],
	'type' => [['valid', 'in', '', '', $types]]
]);
$this->assign('params', $params);

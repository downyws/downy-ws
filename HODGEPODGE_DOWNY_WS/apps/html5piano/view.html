{literal}
<style type="text/css">
div.content.app{background:#444444;}
.app .cb{clear:both;}
.app .autobox{margin:20px auto;}
.app .autobox input{border:1px solid #000000;width:100%;padding:3px 5px;margin-bottom:10px;cursor:pointer;}
.app .autobox input:hover{background:#DDDDDD;}
.app .autobox textarea{border:1px solid #000000;width:100%;padding:3px 5px;margin-bottom:10px;height:200px;}
.app .autobox .ms{color:#FFFFFF;font-weight:bold;}
.app .autobox a{color:#FFFFFF;font-weight:bold;}
.app .piano{border:1px solid #000000;display:block;margin:auto;}
.app .ki{border:1px solid #000000;float:left;text-align:center;padding:70px 10px 10px;cursor:pointer;}
.app .ki1{background:#FFFFFF}
.app .ki1:hover{background:#F6F6F6;}
.app .ki1.down{background:#EFEFEF;}
</style>
{/literal}
<script type="text/javascript">
var sound_path = "{$smarty.const.RESOURCES_DOMAIN}hodgepodge_downy_ws/{$config.key}/|ki|.ogg";
{literal}
var fixed = false;
var bk = new Array(
	"1||11||do||ki1",
	"2||12||ri||ki1",
	"3||13||mi||ki1",
	"4||14||fa||ki1",
	"5||15||so||ki1",
	"6||16||la||ki1",
	"7||17||xi||ki1",

	"Q||21||do||ki1",
	"W||22||ri||ki1",
	"E||23||mi||ki1",
	"R||24||fa||ki1",
	"T||25||so||ki1",
	"Y||26||la||ki1",
	"U||27||xi||ki1",
	
	"A||31||do||ki1",
	"S||32||ri||ki1",
	"D||33||mi||ki1",
	"F||34||fa||ki1",
	"G||35||so||ki1",
	"H||36||la||ki1",
	"J||37||xi||ki1",
	
	"Z||41||do||ki1",
	"X||42||ri||ki1",
	"C||43||mi||ki1",
	"V||44||fa||ki1",
	"B||45||so||ki1"
);

$(function(){
	var ki = null, width = 0, kc = 0;
	for(var i = 0; i < bk.length; i++){
		ki = bk[i].split("||");
		kc = ASCII(ki[0]);
		$(".app .piano").append("<div class='ki " + ki[3] + "' data-sound='" + ki[1] + "' id='ki_" + kc + "'>" + ki[2] + "<br />[" + ki[0] + "]</div>");
		$(".app .sound").append("<audio preload='auto' id='s_" + ki[1] + "' src='" + sound_path.replace("|ki|", ki[1]) + "'></audio>");
		width += $("#ki_" + kc).outerWidth();
	}
	$(".app .piano").append("<div class='cb'></div>");
	$(".app .piano").css("width", width + "px");
	$(".app .autobox").css("width", width + "px");

	$(".app .ki").bind("mousedown", H_Down);
	$(".app .ki").bind("mouseup mouseleave", H_Up);
	$("body").bind("keydown", H_Down);
	$("body").bind("keyup", H_Up);

	$(".app .autobox input[type=button]").bind("click", H_AutoPlay);
	$(".app .autobox a").bind("click", function(){
		$(this).parent().parent().find("textarea").html($(this).html());
	});
});

function H_Down(event){
	var obj = (typeof(event.keyCode) == "undefined") ? $(this) : $("#ki_" + event.keyCode);
	obj.addClass("down");
	F_Play(obj.data("sound"));
}
function H_Up(event){
	var obj = (typeof(event.keyCode) == "undefined") ? $(this) : $("#ki_" + event.keyCode);
	obj.removeClass("down");
}
function H_AutoPlay(){
	var ms = $(".app .autobox textarea").val();
	$(".app .autobox input[type=button]").unbind("click", H_AutoPlay).hide(100);
	F_AutoPlay(ms);
}

function F_Play(sound){
	if($("#s_" + sound).length){
		sound = fixed ? document.getElementById("s_" + sound) : new Audio(sound_path.replace("|ki|", sound));
		sound.play();
		return true;
	}
	return false;
}
function F_AutoPlay(ms){
	if(ms.length < 1){
		$(".app .autobox input[type=button]").bind("click", H_AutoPlay).show(100);
		return;
	}

	var sound = $(".app #ki_" + ASCII(ms[0])).data("sound");
	if(F_Play(sound) || ms[0] == " "){
		setTimeout(function(){F_AutoPlay(ms.substring(1));}, 500);
	}else{
		F_AutoPlay(ms.substring(1));
	}
}

function ASCII(value){
	return (typeof(value) != "undefined" && value != "") ? value.charCodeAt() : 0;
}
{/literal}
</script>
<div class="piano"></div>
<div class="autobox">
	<textarea></textarea>
	<input type="button" value="play" />
	<div class="ms">
		国歌：<a href="javascript:void(0)">QETTYTEQTTTEQ5555Q 5Q Q567QQ EQWETTEEQETEWW YTWETE TEWEQE 56QQEETTWWW6W 5Q QE ET QETTYTEQTTTEQ5Q EQTTTEQ5Q5Q5QQ</a><br />
		欢乐颂：<a href="javascript:void(0)">EERTTREWQQWEEWW EERTTREWQQWEWQQ WWEQWEREQWEREWQW5 EERTTREWQQWEWQQ</a><br />
		朋友再见：<a href="javascript:void(0)">WERRYTRYE EWQ7EQ76 367Q6 367Q6 367Q76Q76EEE WERRRYTRYE EWQ7EQ76</a><br />
		蜗牛：<a href="javascript:void(0)">TTTTETQYT TTTTEWQEW WETTEEWQQWEQQ6565 TTTTETQYT TTTTEWQEW WETTEEWQQ WEQQ6565 TTTTEWQYTTYQWQWEWQ</a><br />
		献给爱丽丝：<a href="javascript:void(0)">DSDSDUSAY QEYU ETUA EDSDSDUSAY QEYU EAUY UASD TFDS RDSA ESAU EDDDDSDSDUSAY QEYU ETUA EDSDSDUSAY QEYU EAUY</a><br />
		萤火虫：<a href="javascript:void(0)">EEWEEWEYT QQ7QQ7QEW EEWEEWEYU AUYTYTEQW QA AUYTRTEWQ QY YTREWEERT QA ASAUYTSA YUAYUAAUAS EEWEEWEYT QQ7QQ7QEW EEWEEWEYU AUYTYTEQW</a><br />
		蓝精灵：<a href="javascript:void(0)">ERTRERTRERTTRTDA WERERSU WERERYT ERTRERTRERTTRTDS WERERSAUYUA T TDDATE T RSSURW ERTRERTRERTTRTAD WERERSAUYUA</a><br />
	</div>
</div>
<div class="sound"></div>

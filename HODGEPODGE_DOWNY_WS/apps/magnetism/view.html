<div class="ctrl">
	<select name="type"></select><input type="text" />
</div>
<table></table>
{literal}
<style type="text/css">
	.app select{box-sizing:border-box;margin-bottom:10px;}
	.app select option.title{background:#999999;color:#FFFFFF;}
	.app .ctrl *{margin-right:10px;box-sizing:border-box;}
	.app table{margin:0px 20px 50px 0px;width:100%;border-bottom:1px solid #4BACC6;}
	.app table thead{border-top:1px solid #4BACC6;border-bottom:1px solid #4BACC6;}
	.app table thead th{font-weight:400;}
	.app table tr.odd{background:#D2EAF1;}
	.app table tr.even{background:#FFFFFF;}
	.app table th{text-align:left;padding:5px 10px;width:260px;}
	.app table th.unit{text-align:right;font-weight:400;}
	.app table td{padding:5px 10px;max-width:85%;}
</style>
{/literal}
<script type="text/javascript">
var DATA = {json_encode($data)};
{literal}
var DB = {
	'磁感应强度': [
		['pT', '皮特斯拉 (pT)', 1000000000000],
		['nT', '纳特斯拉 (nT)', 1000000000],
		['µT', '微特斯拉 (µT)', 1000000],
		['mT', '毫特斯拉 (mT)', 1000],
		['T', '特斯拉 (T)', 1],
		['kT', '千特斯拉 (kT)', 0.001],
		['megatesla', '兆特斯拉', 0.000001],
		['Wb/m2', '韦伯每平方米 (Wb/m²)', 1],
		['G', '高斯 (G)', 10000],
		['Mw/cm2', '麦克斯韦每平方厘米 (Mw/cm²)', 10000],
		['line_per_square_centimetre', '线每平方厘米', 10000],
		['γ', '伽玛 (γ)', 1000000000]
	],
	'磁场强度': [
		['A/m', '安每米 (A/m)', 79.577471545947667884441881686308],
		['AT/m', '安培匝数每米 (AT/m)', 79.577471545947667884441881686308],
		['Oe', '奥斯特 (Oe)', 1],
		['Gi/m', '吉伯每米 (Gi/m)', 100]
	],
	'磁通量': [
		['nWb', '纳韦伯 (nWb)', 1000000000],
		['μWb', '微韦伯 (μWb)', 1000000],
		['mWb', '毫韦伯 (mWb)', 1000],
		['Wb', '韦伯 (Wb)', 1],
		['Vs', '伏秒 (Vs)', 1],
		['Txm2', '特斯拉每米 (T×m²)', 1],
		['Mw', '麦克斯韦 (Mw)', 100000000],
		['Gxcm2', '高斯每平方厘米 (G×cm²)', 100000000],
		['magnetic_flux_quantum', '量子磁通量', 483597898104797.05341247287845162]
	],
	'磁动势': [
		['AT', '安匝 (AT)', 1],
		['Gi', '吉尔伯特 (Gi)', 1.2566370614359172953850573533118]
	]
};

var html = '';
html += '<option value="">请选择</option>';
for(key in DB){
	html += '<option disabled="disabled"></option>';
	html += '<option disabled="disabled" class="title">' + key + '</option>';
	for(k in DB[key]){
		html += '<option data-rate="' + DB[key][k][2] + '" data-cate="' + key + '" value="' + DB[key][k][0] + '">' + DB[key][k][1] + '</option>';
	}
}
$('.app select').html(html);

$('.app input').on('change keyup', refresh);
$('.app select').change(refresh);

function refresh(){
	$('.app table').html('');

	var cate =	$('.app select option:selected').data('cate');
	var rate =	$('.app select option:selected').data('rate');
	var inval = $('.app input').val();

	if(cate != '' && rate != '' && inval != ''){
		html = '';
		for(key in DB[cate]){
			html += '<tr class="' + (key % 2 ? 'even' : 'odd') + '"><th>' + DB[cate][key][1] + '</th><td>' + (DB[cate][key][2] * inval / rate) + '</td></tr>';
		}
		html = '<thead><tr><th colspan="2">' + cate + '</th></tr></thead><tbody>' + html + '</tbody>';
		$('.app table').html(html);
	}
}

$('.app input[type=text]').val(DATA.content);
$('.app select').val(DATA.type).change();
{/literal}
</script>
